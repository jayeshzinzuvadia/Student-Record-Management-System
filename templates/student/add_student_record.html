{% load static %}
<html lang="en">
    <head>
        <title>Add Student Record</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}">
        <script src="//ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    </head>
    <body>
        <!-- Header part -->
        {% include 'student/_header.html' %}

        <h2 class="mt-2 text-center">Add Student Record</h2>
        <hr class="bg-danger" />
        <!-- Back to Home page button -->
        <a class="btn btn-primary" 
            href="{% url 'student:allstudentslist'%}"    
            style="width:auto">
            Back
        </a>

        <form action="{% url 'student:registerstudent'%}" method="post">
            {%  csrf_token  %}
            <!-- Student's personal information form -->
            <div class="card mt-2">
                <div class="card-header bg-dark text-white">Student's Personal Information</div>
                <div class="card-body bg-light">
                    <div class="row">
                        <div class="col form-group">
                            <label class="form-label" for="id_no">Student ID</label>
                            <input type="text" class="form-control" name="id_no" placeholder="Student ID" required/>
                        </div>
                        <div class="col form-group">
                            <label class="form-label" for="name">Name</label>
                            <input type="text" class="form-control" name="name" required placeholder="Lastname Firstname Middlename"/>
                        </div>
                    </div>
                    <div class="row mt-1">
                        <div class="col form-group">
                            <label class="form-label" for="branch">Branch</label>
                            <select class="form-select" name="branch" required>
                                <option value="">Select Branch</option>
                                <option value="CE">CE</option>
                                <option value="CH">CH</option>
                                <option value="CL">CL</option>
                                <option value="IT">IT</option>
                                <option value="EC">EC</option>
                                <option value="IC">IC</option>
                                <option value="ME">ME</option>
                            </select>
                        </div>
                        <div class="col form-group">
                            <label class="form-label" for="admission_category">Admission Category</label>
                            <select class="form-select" name="admission_category" required>
                                <option value="">Select Admission Category</option>
                                <option value="SF">SF</option>
                                <option value="GIA">GIA</option>
                                <option value="TFW">TFW</option>
                                <option value="NRI">NRI</option>
                            </select>
                        </div>
                    </div>
                    <div class="row mt-1">
                        <div class="col form-group">
                            <label class="form-label" for="gender">Gender</label>
                            <select class="form-select" name="gender" required>
                                <option value="">Select Gender</option>
                                <option value="M">Male</option>
                                <option value="F">Female</option>
                            </select>
                        </div>
                        <div class="col form-group">
                            <label class="form-label" for="cast_category">Cast Category</label>
                            <select class="form-select" name="cast_category" required>
                                <option value="">Select Cast Category</option>
                                <option value="Open">Open</option>
                                <option value="SEBC">SEBC</option>
                                <option value="SC">SC</option>
                                <option value="ST">ST</option>
                            </select>
                        </div>
                    </div>
                    <div class="row mt-1">
                        <div class="col form-group">
                            <label class="form-label" for="dob">Date of Birth</label>
                            <input type="date" class="form-control" name="dob" required placeholder="Date of Birth"/>
                        </div>
                        <div class="col form-group">
                            <label class="form-label" for="email_id">Email ID</label>
                            <input type="email" class="form-control" name="email_id" required placeholder="Email ID"/>
                        </div>
                    </div>
                    <div class="row mt-1">
                        <div class="col form-group">
                            <label class="form-label" for="contact_no_1">Contact No. 1</label>
                            <input type="text" class="form-control" name="contact_no_1" placeholder="Phone Number" required/>
                        </div>
                        <div class="col form-group">
                            <label class="form-label" for="contact_no_2">Contact No. 2</label>
                            <input type="text" class="form-control" name="contact_no_2" placeholder="Mobile Number"/>
                        </div>
                    </div>                    
                </div>
            </div>

            <!-- Student's address information -->
            <div class="card mt-2">
                <div class="card-header text-white bg-dark">
                    Student's Address Information
                </div>
                <div class="card-body bg-light">
                    <div class="row">
                        <div class="col form-group">
                            <label class="form-label" for="address_1">Address 1</label>
                            <input type="text" class="form-control" name="address_1" required/>
                        </div>
                    </div>
                    <div class="row mt-1">
                        <div class="col form-group">
                            <label class="form-label" for="address_2">Address 2</label>
                            <input type="text" class="form-control" name="address_2"/>
                        </div>
                    </div>
                    <div class="row mt-1">
                        <div class="col form-group">
                            <label class="form-label" for="address_3">Address 3</label>
                            <input type="text" class="form-control" name="address_3"/>
                        </div>
                    </div>
                    <div class="row mt-1">
                        <div class="col form-group">
                            <label class="form-label" for="city">City</label>
                            <input type="text" class="form-control" name="city" required/>
                        </div>
                        <div class="col form-group">
                            <label class="form-label" for="state">State</label>
                            <input type="text" class="form-control" name="state" required/>
                        </div>
                    </div>
                    <div class="row mt-1">
                        <div class="col-6 form-group">
                            <label class="form-label" for="pin_code">Pin code</label>
                            <input type="text" class="form-control" name="pin_code" required/>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Student's academic information -->
            <div class="card mt-2">
                <div class="card-header text-white bg-dark">
                    Student's Academic Information
                </div>
                <div class="card-body bg-light">
                    <div class="row">
                        <div class="col-4 form-group">
                            <label class="form-label" for="batch_year">Batch Year</label>
                            <input type="number" class="form-control" name="batch_year" 
                                placeholder="Year when student will graduate"
                                step="1" min="2000" required/>
                        </div>
                    </div>
                    <div class="row mt-1">
                        <div class="col form-group">
                            <label class="form-label" for="ssc_result">SSC Result</label>
                            <input type="number" class="form-control" name="ssc_result" 
                                min="0" max="100" step="0.01" required/>
                        </div>
                        <div class="col form-group">
                            <label class="form-label" for="hsc_result">HSC Result</label>
                            <input type="number" class="form-control" name="hsc_result" 
                                min="0" max="100" step="0.01" value="0"/>
                        </div>
                        <div class="col form-group">
                            <label class="form-label" for="diploma_result">Diploma Result</label>
                            <input type="number" class="form-control" name="diploma_result" 
                                min="0" max="100" step="0.01" value="0"/>
                        </div>
                    </div>
                    <div class="row mt-1">
                        <div class="col form-group">
                            <label class="form-label" for="cpi">CPI</label>
                            <input type="number" class="form-control" name="cpi" 
                                min="0" max="10" step="0.01" required/>
                        </div>
                        <div class="col form-group">
                            <label class="form-label" for="spi_sem_1">SPI Sem 1</label>
                            <input type="number" class="form-control" name="spi_sem_1" 
                                min="0" max="10" step="0.01" required/>
                        </div>
                        <div class="col form-group">
                            <label class="form-label" for="spi_sem_2">SPI Sem 2</label>
                            <input type="number" class="form-control" name="spi_sem_2" 
                                min="0" max="10" step="0.01" required/>
                        </div>
                    </div>
                    <div class="row mt-1">
                        <div class="col form-group">
                            <label class="form-label" for="spi_sem_3">SPI Sem 3</label>
                            <input type="number" class="form-control" name="spi_sem_3" 
                                min="0" max="10" step="0.01" required/>
                        </div>
                        <div class="col form-group">
                            <label class="form-label" for="spi_sem_4">SPI Sem 4</label>
                            <input type="number" class="form-control" name="spi_sem_4" 
                                min="0" max="10" step="0.01" required/>
                        </div>
                        <div class="col form-group">
                            <label class="form-label" for="spi_sem_5">SPI Sem 5</label>
                            <input type="number" class="form-control" name="spi_sem_5" 
                                min="0" max="10" step="0.01" required/>
                        </div>
                    </div>
                    <div class="row mt-1">
                        <div class="col form-group">
                            <label class="form-label" for="spi_sem_6">SPI Sem 6</label>
                            <input type="number" class="form-control" name="spi_sem_6" 
                                min="0" max="10" step="0.01" required/>
                        </div>
                        <div class="col form-group">
                            <label class="form-label" for="spi_sem_7">SPI Sem 7</label>
                            <input type="number" class="form-control" name="spi_sem_7" 
                                min="0" max="10" step="0.01" required/>
                        </div>
                        <div class="col form-group">
                            <label class="form-label" for="spi_sem_8">SPI Sem 8</label>
                            <input type="number" class="form-control" name="spi_sem_8" 
                                min="0" max="10" step="0.01" required/>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Student's career information -->
            <div class="card mt-3">
                <div class="card-header text-white bg-dark">
                    Student's Career Information
                </div>
                <div class="card-body bg-light">
                    <div class="row">
                        <div class="col form-group">
                            <label class="form-label" for="career_preference">Career Preference</label>
                            <select class="form-select" name="career_preference" required>
                                <option value="">Select Career Preference</option>
                                <option value="J">Job</option>
                                <option value="H">Higher Studies</option>
                            </select>
                        </div>
                        <div class="col form-group">
                            <label class="form-label" for="internship">Internship</label>
                            <input type="text" class="form-control" name="internship" required/>
                        </div>
                    </div>
                    <div class="row mt-1">
                        <div class="col form-group">
                            <label class="form-label" for="placement">Placement</label>
                            <input type="text" class="form-control" name="placement" required/>
                        </div>
                        <div class="col form-group">
                            <label class="form-label" for="salary">Salary</label>
                            <input type="number" class="form-control" name="salary" 
                                min="0" step="0.01" required/>
                        </div>
                    </div>
                    <div class="row mt-1">
                        <div class="col form-group">
                            <label class="form-label" for="other_placement_1">Other Placement 1</label>
                            <input type="text" class="form-control" name="other_placement_1"/>
                        </div>
                        <div class="col form-group">
                            <label class="form-label" for="other_placement_2">Other Placement 2</label>
                            <input type="text" class="form-control" name="other_placement_2"/>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Student's skills -->
            <div class="card mt-3">
                <div class="card-header text-white bg-dark">
                    Student's Skills
                </div>
                <div class="card-body bg-light">
                    <div class="row">
                        <div class="col">
                            <div id="newSkillRow"></div>
                            <button id="addSkillRow" type="button" class="btn btn-info">Add Skill</button>
                            <input type="hidden" name="total_skills" id="total_skills">
                            <input type="hidden" name="removed_sids" id="removed_sids">
                        </div>
                    </div>
                </div>
            </div>

            <!-- Student's achievements -->
            <div class="card mt-3">
                <div class="card-header text-white bg-dark">
                    Student's Achievements
                </div>
                <div class="card-body bg-light">
                    <div class="row">
                        <div class="col">
                            <div id="newAchievementRow"></div>
                            <button id="addAchievementRow" type="button" class="btn btn-warning">Add Achievement</button>
                            <input type="hidden" name="total_achievements" id="total_achievements">
                            <input type="hidden" name="removed_aids" id="removed_aids">
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Submit button -->
            <div class="mt-3 form-group text-center">
                <input type="submit" value="Save Student Record" class="btn btn-success" name="submit">
            </div>
        </form>

        <script type="text/javascript">
            var s = 0; // s is for skills
            var removedSids = '';
            var a = 0; // a is for achievements
            var removedAids = '';

            // add skill row
            $("#addSkillRow").click(function () {
                var html = '';
                html += '<div id="inputFormSkillRow">';
                html += '<div class="input-group mb-3">';
                html += '<input type="text" name="skills[' + s + ']" class="form-control m-input" placeholder="Enter skill" autocomplete="off">';
                html += '<div class="input-group-append">';
                html += '<button id="removeSkillRow" type="button" class="btn btn-danger" onclick="saveRemovedSid('+ s +')">Remove</button>';
                html += '</div>';
                html += '</div>';
                s++;    // increment skill count
                $('#newSkillRow').append(html);
                $("#total_skills").val(s);
            });
        
            // remove skill row
            $(document).on('click', '#removeSkillRow', function () {
                $(this).closest('#inputFormSkillRow').remove();
            });
            function saveRemovedSid(sid) {
                removedSids += sid + ",";
                $("#removed_sids").val(removedSids);
            }

            // add achievements row
            $("#addAchievementRow").click(function () {
                var html = '';
                html += '<div id="inputFormAchievementRow">';
                html += '<div class="input-group mb-3">';
                html += '<input type="text" name="achievements[' + a + ']" class="form-control m-input" placeholder="Enter achievement" autocomplete="off">';
                html += '<div class="input-group-append">';
                html += '<button id="removeAchievementRow" type="button" class="btn btn-danger" onclick="saveRemovedAid(' + a + ')">Remove</button>';
                html += '</div>';
                html += '</div>';
                a++;    // increment achievement count
                $('#newAchievementRow').append(html);
                $("#total_achievements").val(a);
            });
        
            // remove achievements row
            $(document).on('click', '#removeAchievementRow', function () {
                $(this).closest('#inputFormAchievementRow').remove();
            });
            function saveRemovedAid(aid) {
                removedAids += aid + ",";
                $("#removed_aids").val(removedAids);
            }
        </script>

        <!-- Footer part -->
        {% include 'student/_footer.html' %}
    </body>
</html>